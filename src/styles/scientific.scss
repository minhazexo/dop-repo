/* ==========================================================================
   Scientific Hub â€” SCSS
   Styles for Scientific.jsx (Scientific Hub page)
   - Responsive grid cards with glassmorphism
   - Animated neon fractal button
   - Accessible focus states
   - Themed code block / folder structure panel
   ========================================================================== */

/* ---------------------------
   1) CSS Variables (Theme)
   --------------------------- */
:root {
  /* Core palette */
  --sci-bg: #0b1220;
  --sci-bg-2: #0a0f1c;
  --sci-surface: rgba(18, 26, 45, 0.74);
  --sci-surface-strong: rgba(18, 26, 45, 0.92);
  --sci-text: #e5e7eb;
  --sci-muted: #9ca3af;
  --sci-border: rgba(255, 255, 255, 0.12);

  /* Accents (Aurora / Neon) */
  --sci-accent: #60a5fa;   /* Sky */
  --sci-accent-2: #6ee7b7; /* Mint */
  --sci-accent-3: #a78bfa; /* Purple */

  /* Extras */
  --sci-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  --sci-radius: 14px;

  /* Typography */
  --sci-title-size: clamp(28px, 4vw, 42px);
  --sci-subtitle-size: clamp(14px, 2vw, 18px);
  --sci-card-title-size: clamp(16px, 2vw, 20px);

  /* Layout */
  --sci-maxw: 1200px;

  /* Code/Folders block */
  --sci-code-bg: #0a0f1a;
  --sci-code-border: rgba(255, 255, 255, 0.12);
  --sci-code-text: #d1d5db;
  --sci-scrollbar: #334155;
}

/* Light theme support if your app switches globally */
@media (prefers-color-scheme: light) {
  :root {
    --sci-bg: #f2f7ff;
    --sci-bg-2: #e9efff;
    --sci-surface: rgba(255, 255, 255, 0.76);
    --sci-surface-strong: rgba(255, 255, 255, 0.92);
    --sci-text: #111827;
    --sci-muted: #475569;
    --sci-border: rgba(0, 0, 0, 0.12);
    --sci-code-bg: #ffffff;
    --sci-code-border: rgba(0, 0, 0, 0.08);
    --sci-code-text: #0f172a;
    --sci-scrollbar: #94a3b8;
  }
}

/* ---------------------------
   2) Helpers / Mixins
   --------------------------- */
@mixin focus-ring($c: var(--sci-accent-2)) {
  outline: none;
  box-shadow:
    0 0 0 2px color-mix(in srgb, $c 50%, transparent),
    0 0 0 5px color-mix(in srgb, $c 25%, transparent);
}

@mixin hover-lift($y: -2px, $shadow: 0 14px 40px rgba(0, 0, 0, 0.35)) {
  transform: translateY($y);
  box-shadow: $shadow;
}

@mixin glass($bg: var(--sci-surface)) {
  background: $bg;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid var(--sci-border);
}

@mixin scrollbars($thumb: var(--sci-scrollbar), $track: transparent) {
  /* WebKit */
  &::-webkit-scrollbar { width: 12px; height: 12px; }
  &::-webkit-scrollbar-track { background: $track; }
  &::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, color-mix(in srgb, $thumb 75%, transparent), color-mix(in srgb, $thumb 55%, transparent));
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }
  /* Firefox */
  scrollbar-color: $thumb $track;
  scrollbar-width: thin;
}

/* Motion prefs */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
    scroll-behavior: auto !important;
  }
}

/* ---------------------------
   3) Page Container
   --------------------------- */
.sci-hub-page {
  min-height: 100dvh;
  color: var(--sci-text);
  background:
    radial-gradient(1200px 600px at 70% 20%, #0d182f 0%, var(--sci-bg) 50%, var(--sci-bg-2) 100%),
    linear-gradient(180deg, transparent, transparent 50%, color-mix(in srgb, var(--sci-accent) 6%, transparent) 120%);
  padding: 100px;

  display: grid;
  place-items: start center;
  gap: clamp(18px, 2vw, 24px);

  /* Optional page-wide subtle starry overlay */
  position: relative;
  isolation: isolate;

  &::before {
    content: "";
    position: absolute; inset: 0;
    background-image:
      radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.12), transparent 60%),
      radial-gradient(1px 1px at 60% 70%, rgba(255,255,255,0.08), transparent 60%),
      radial-gradient(1px 1px at 80% 20%, rgba(255,255,255,0.10), transparent 60%);
    pointer-events: none;
    z-index: -1;
  }
}

/* ---------------------------
   4) Header
   --------------------------- */
.sci-header {
  width: min(100%, var(--sci-maxw));
  margin-inline: auto;
  text-align: center;

  .sci-title {
    font-size: var(--sci-title-size);
    font-weight: 800;
    letter-spacing: 0.3px;
    margin: 0 0 6px 0;
    background: linear-gradient(90deg, var(--sci-accent), var(--sci-accent-2), var(--sci-accent-3));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    filter: drop-shadow(0 6px 20px color-mix(in srgb, var(--sci-accent) 25%, transparent));
  }

  .sci-subtitle {
    font-size: var(--sci-subtitle-size);
    color: var(--sci-muted);
    margin: 0;
  }
}

/* ---------------------------
   5) Fractal CTA
   --------------------------- */
.sci-fractal-section {
  width: min(100%, var(--sci-maxw));
  margin-inline: auto;
  display: flex;
  justify-content: center;
  align-items: center;

  .sci-fractal-btn {
    --_g1: var(--sci-accent);
    --_g2: var(--sci-accent-2);
    --_g3: var(--sci-accent-3);

    appearance: none;
    border: 1px solid color-mix(in srgb, var(--sci-accent-2) 40%, transparent);
    border-radius: 999px;
    padding: 14px 22px;
    font-size: clamp(14px, 2vw, 16px);
    font-weight: 700;
    letter-spacing: 0.2px;
    color: #0b0f1a;
    background: linear-gradient(120deg, var(--_g1), var(--_g2) 50%, var(--_g3));
    box-shadow:
      0 12px 30px color-mix(in srgb, var(--sci-accent-2) 28%, transparent),
      inset 0 0 0 1px rgba(255,255,255,0.25);
    cursor: pointer;
    position: relative;
    transition: transform 220ms ease, box-shadow 220ms ease, filter 220ms ease;

    &:hover { @include hover-lift(-3px); filter: saturate(1.06); }
    &:active { transform: translateY(0); }
    &:focus-visible { @include focus-ring(var(--sci-accent)); }

    /* Glow ring */
    &::after {
      content: "";
      position: absolute; inset: -4px;
      border-radius: inherit;
      background: radial-gradient(40% 60% at 50% 50%, color-mix(in srgb, var(--sci-accent-2) 25%, transparent), transparent 60%);
      opacity: .6;
      z-index: -1;
      filter: blur(10px);
      transition: opacity .2s ease;
    }
    &:hover::after { opacity: .85; }
  }
}

/* ---------------------------
   6) Knowledge Cards Grid
   --------------------------- */
.sci-cards-section {
  width: min(100%, var(--sci-maxw));
  margin-inline: auto;

  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));

  .sci-knowledge-card {
    @include glass(var(--sci-surface));
    border-radius: var(--sci-radius);
    padding: 16px 14px;
    box-shadow: var(--sci-shadow);
    transition: transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
    position: relative;
    overflow: hidden;

    /* Subtle gradient border */
    &::before {
      content: "";
      position: absolute; inset: 0;
      border-radius: inherit;
      padding: 1px;
      background: linear-gradient(135deg,
        color-mix(in srgb, var(--sci-accent) 30%, transparent),
        color-mix(in srgb, var(--sci-accent-3) 28%, transparent));
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
    }

    &:hover { @include hover-lift(-2px); }
    &:focus-within { @include focus-ring(var(--sci-accent-3)); }

    .sci-card-icon {
      width: 44px; height: 44px;
      display: grid; place-items: center;
      font-size: 22px;
      border-radius: 10px;
      color: #0b0f1a;
      background: linear-gradient(135deg, var(--sci-accent-2), var(--sci-accent));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35), 0 10px 24px color-mix(in srgb, var(--sci-accent) 28%, transparent);
      margin-bottom: 10px;

      /* Gentle float */
      animation: sci-float 3.6s ease-in-out infinite both;
    }

    .sci-card-title {
      margin: 0 0 8px 0;
      font-size: var(--sci-card-title-size);
      font-weight: 800;
      letter-spacing: 0.2px;
      color: var(--sci-text);
    }

    .sci-card-content {
      margin: 0;
      color: var(--sci-muted);
      line-height: 1.5;
    }
  }
}

/* Float animation for icons */
@keyframes sci-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

/* ---------------------------
   7) Folder Structure Section
   --------------------------- */
.sci-structure-section {
  width: min(100%, var(--sci-maxw));
  margin-inline: auto;

  .sci-structure-title {
    font-size: clamp(18px, 2.2vw, 22px);
    font-weight: 800;
    letter-spacing: 0.2px;
    margin: 10px 0;
    color: var(--sci-text);
  }

  .sci-structure-container {
    @include glass(var(--sci-surface-strong));
    border-radius: var(--sci-radius);
    box-shadow: var(--sci-shadow);
    padding: clamp(12px, 1.4vw, 16px);
  }

  .sci-folder-structure {
    margin: 0;
    padding: 14px;
    border-radius: 10px;
    background: var(--sci-code-bg);
    color: var(--sci-code-text);
    border: 1px solid var(--sci-code-border);
    line-height: 1.5;
    font: 500 12.5px/1.5 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    overflow: auto;
    max-height: min(60vh, 560px);
    white-space: pre-wrap;     /* allow wrapping */
    word-break: break-word;    /* safer on narrow screens */

    @include scrollbars();

    /* top & bottom fade edges for long content */
    position: relative;
    &::before,
    &::after {
      content: "";
      position: sticky;
      left: 0; right: 0;
      height: 18px;
      pointer-events: none;
      z-index: 1;
    }
    &::before {
      top: 0;
      background: linear-gradient(to bottom, color-mix(in srgb, var(--sci-code-bg) 100%, transparent), transparent);
    }
    &::after {
      bottom: 0;
      background: linear-gradient(to top, color-mix(in srgb, var(--sci-code-bg) 100%, transparent), transparent);
    }
  }
}

/* ---------------------------
   8) Responsive Tweaks
   --------------------------- */
@media (max-width: 960px) {
  .sci-cards-section {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
}

@media (max-width: 640px) {
  .sci-fractal-section .sci-fractal-btn {
    width: 100%;
    padding-block: 16px;
  }
  .sci-cards-section {
    gap: 12px;
  }
}

/* ---------------------------
   9) Subtle Transitions
   --------------------------- */
.sci-hub-page * {
  transition: background-color 180ms ease, color 180ms ease, border-color 180ms ease, box-shadow 200ms ease, transform 200ms ease;
}
